!function(e){e.fn.moreInfoPopup=function(o,r,n){var p=e.extend(!0,{},e.fn.moreInfoPopup.defaults,n),t=this;p._wrapper="."+p.wrapper,p._arrow="."+p.arrow,p._body="."+p.body,p._content="."+p.content;var a=function(e,o){return e.outerHeight()+(e.offset().top-o.offset().top)},i=function(){p.$wrapper=e(p._wrapper),p.$arrow=e(p._arrow),p.$body=e(p._body),p.$content=e(p._content)},s=function(){p.timeline=new TimelineMax({paused:!0,onReverseComplete:function(){p.$wrapper.css("top",0),p.$wrapper.removeData("rowIndex")}}).fromTo(p.$wrapper,p.animation.speed,p.animation.from,p.animation.to)},c=function(){t.prepend(e("<div/>",{"class":p.wrapper}).append(e("<div/>",{"class":p.arrow})).append(e("<div/>",{"class":p.body}).append(e("<p/>",{"class":p.content}))))};t.on("click.moreInfoPopup",o,function(n){var i=r.call(this),s=a(e(this),t);return p.$wrapper.data("rowIndex",e(this).index(o)),parseFloat(p.$wrapper.css("top"))!==s&&i.length?(p.$wrapper.css("top",s+"px"),p.$content.html(i.html()),p.timeline.restart(),n.stopPropagation(),void e(document).one("click",function(r){e(r.target).is(o)||p.timeline.reverse()})):void p.timeline.reverse()}),e(window).on("resize.moreInfoPopup",function(){if("undefined"!=typeof(rowIndex=p.$wrapper.data("rowIndex"))){var r=e(o).eq(rowIndex),n=a(r,t);parseFloat(p.$wrapper.css("top"))!==n&&p.$wrapper.css("top",n+"px")}});var f=function(){return t.find(p._wrapper).length||c(),i(),s(),this};return f()},e.fn.moreInfoPopup.defaults={wrapper:"more-info-popup",arrow:"more-info-popup__arrow",body:"more-info-popup__body",content:"more-info-popup__content",animation:{speed:.3,from:{yPercent:-20,autoAlpha:0},to:{yPercent:0,autoAlpha:1}}}}(jQuery);
